<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="14.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <!-- find the global assembly info path -->
        <GlobalAssemblyInfoPath Condition=" '$(GlobalAssemblyInfoPath)' == '' And Exists('$(SettingsRoot)GlobalAssemblyInfo.cs') ">$(SettingsRoot)GlobalAssemblyInfo.cs</GlobalAssemblyInfoPath>
        <GlobalAssemblyInfoPath Condition=" '$(GlobalAssemblyInfoPath)' == '' And Exists('$(SolutionRoot)GlobalAssemblyInfo.cs') ">$(SolutionRoot)GlobalAssemblyInfo.cs</GlobalAssemblyInfoPath>

        <!-- find the code analysis dictionary path -->
        <CodeAnalysisDictionaryPath Condition=" '$(CodeAnalysisDictionaryPath)' == '' And Exists('$(ProjectRoot)CodeAnalysis.xml') ">$(ProjectRoot)CodeAnalysis.xml</CodeAnalysisDictionaryPath>
        <CodeAnalysisDictionaryPath Condition=" '$(CodeAnalysisDictionaryPath)' == '' And Exists('$(SrcRoot)CodeAnalysis.xml') And '$(TestProject)' == 'false' ">$(SrcRoot)CodeAnalysis.xml</CodeAnalysisDictionaryPath>
        <CodeAnalysisDictionaryPath Condition=" '$(CodeAnalysisDictionaryPath)' == '' And Exists('$(TestRoot)CodeAnalysis.xml') And '$(TestProject)' == 'true' ">$(TestRoot)CodeAnalysis.xml</CodeAnalysisDictionaryPath>
        <CodeAnalysisDictionaryPath Condition=" '$(CodeAnalysisDictionaryPath)' == '' And Exists('$(SettingsRoot)CodeAnalysis.xml') ">$(SettingsRoot)CodeAnalysis.xml</CodeAnalysisDictionaryPath>
        <CodeAnalysisDictionaryPath Condition=" '$(CodeAnalysisDictionaryPath)' == '' And Exists('$(SolutionRoot)CodeAnalysis.xml') ">$(SolutionRoot)CodeAnalysis.xml</CodeAnalysisDictionaryPath>

        <!-- find the code analysis RuleSet path -->
        <CodeAnalysisRuleSetPath Condition=" '$(CodeAnalysisRuleSetPath)' == '' And Exists('$(ProjectRoot)CodeAnalysis.ruleset') ">$(ProjectRoot)CodeAnalysis.ruleset</CodeAnalysisRuleSetPath>
        <CodeAnalysisRuleSetPath Condition=" '$(CodeAnalysisRuleSetPath)' == '' And Exists('$(SrcRoot)CodeAnalysis.ruleset') And '$(TestProject)' == 'false' ">$(SrcRoot)CodeAnalysis.ruleset</CodeAnalysisRuleSetPath>
        <CodeAnalysisRuleSetPath Condition=" '$(CodeAnalysisRuleSetPath)' == '' And Exists('$(TestRoot)CodeAnalysis.ruleset') And '$(TestProject)' == 'true' ">$(TestRoot)CodeAnalysis.ruleset</CodeAnalysisRuleSetPath>
        <CodeAnalysisRuleSetPath Condition=" '$(CodeAnalysisRuleSetPath)' == '' And Exists('$(SettingsRoot)CodeAnalysis.ruleset') ">$(SettingsRoot)CodeAnalysis.ruleset</CodeAnalysisRuleSetPath>
        <CodeAnalysisRuleSetPath Condition=" '$(CodeAnalysisRuleSetPath)' == '' And Exists('$(SolutionRoot)CodeAnalysis.ruleset') ">$(SolutionRoot)CodeAnalysis.ruleset</CodeAnalysisRuleSetPath>

        <CodeAnalysisRuleSet Condition=" '$(CodeAnalysisRuleSetPath)' != '' ">$(CodeAnalysisRuleSetPath)</CodeAnalysisRuleSet>

        <!-- find the stylecop settings path -->
        <StyleCopSettingsPath Condition=" '$(StyleCopSettingsPath)' == '' And Exists('$(ProjectRoot)stylecop.json') ">$(ProjectRoot)stylecop.json</StyleCopSettingsPath>
        <StyleCopSettingsPath Condition=" '$(StyleCopSettingsPath)' == '' And Exists('$(SrcRoot)stylecop.json') And '$(TestProject)' == 'false' ">$(SrcRoot)stylecop.json</StyleCopSettingsPath>
        <StyleCopSettingsPath Condition=" '$(StyleCopSettingsPath)' == '' And Exists('$(TestRoot)stylecop.json') And '$(TestProject)' == 'true' ">$(TestRoot)stylecop.json</StyleCopSettingsPath>
        <StyleCopSettingsPath Condition=" '$(StyleCopSettingsPath)' == '' And Exists('$(SettingsRoot)stylecop.json') ">$(SettingsRoot)stylecop.json</StyleCopSettingsPath>
        <StyleCopSettingsPath Condition=" '$(StyleCopSettingsPath)' == '' And Exists('$(SolutionRoot)stylecop.json') ">$(SolutionRoot)stylecop.json</StyleCopSettingsPath>

        <!-- find condo assembly info path -->
        <CondoAssemblyInfoPath Condition=" '$(CondoAssemblyInfoPath)' == '' And Exists('$(SettingsRoot)Condo.AssemblyInfo.cs') ">$(SettingsRoot)Condo.AssemblyInfo.cs</CondoAssemblyInfoPath>
        <CondoAssemblyInfoPath Condition=" '$(CondoAssemblyInfoPath)' == '' And Exists('$(SolutionRoot)Condo.AssemblyInfo.cs') ">$(SolutionRoot)Condo.AssemblyInfo.cs</CondoAssemblyInfoPath>
    </PropertyGroup>

    <ItemGroup>
        <!-- include the global assembly info file -->
        <Compile Include="$(GlobalAssemblyInfoPath)"
                 Condition=" '$(GlobalAssemblyInfoPath)' != '' ">
            <Link>Properties\GlobalAssemblyInfo.cs</Link>
        </Compile>

        <Compile Include="$(CondoAssemblyInfoPath)"
                 Condition=" '$(CondoAssemblyInfoPath)' != '' ">
            <Link>Properties\Condo.AssemblyInfo.cs</Link>
        </Compile>

        <!-- include the code analysis dictionary file -->
        <CodeAnalysisDictionary Include="$(CodeAnalysisDictionaryPath)"
                                Condition=" '$(CodeAnalysisDictionaryPath)' != '' ">
            <Link>CodeAnalysisDictionary.xml</Link>
        </CodeAnalysisDictionary>

        <!-- include the stylecop settings file -->
        <AdditionalFiles Include="$(StyleCopSettingsPath)" Condition=" '$(StyleCopSettingsPath)' != '' ">
            <Link>stylecop.json</Link>
        </AdditionalFiles>

    </ItemGroup>

    <PropertyGroup>
        <!-- force rebuild if this file changes -->
        <MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
    </PropertyGroup>
</Project>