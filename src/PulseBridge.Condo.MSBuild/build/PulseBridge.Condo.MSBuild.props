<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="14.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <!-- default to visual studio 2015 -->
        <VisualStudioVersion Condition=" '$(VisualStudioVersion)' == '' ">14.0</VisualStudioVersion>

        <DirectorySeparatorChar>$([System.IO.Path]::DirectorySeparatorChar)</DirectorySeparatorChar>

        <ProjectName Condition=" '$(ProjectName)' == '' ">$(MSBuildProjectName)</ProjectName>

        <!-- get the solution and package root paths -->
        <SolutionRoot       Condition=" '$(SolutionRoot)'       == '' ">$([System.IO.Path]::GetFullPath('$(MSBuildThisFileDirectory)..$(DirectorySeparatorChar)..$(DirectorySeparatorChar)..$(DirectorySeparatorChar)'))</SolutionRoot>
        <SrcRoot            Condition=" '$(SrcRoot)'            == '' ">$([System.IO.Path]::Combine('$(SolutionRoot)', 'src'))$(DirectorySeparatorChar)</SrcRoot>
        <TestRoot           Condition=" '$(TestRoot)'           == '' ">$([System.IO.Path]::Combine('$(SolutionRoot)', 'test'))$(DirectorySeparatorChar)</TestRoot>
        <ArtifactsRoot      Condition=" '$(ArtifactsRoot)'      == '' ">$([System.IO.Path]::Combine('$(SolutionRoot)', 'artifacts'))$(DirectorySeparatorChar)</ArtifactsRoot>

        <ProjectRoot        Condition=" '$(ProjectRoot)'        == '' ">$(MSBuildProjectDirectory)$(DirectorySeparatorChar)</ProjectRoot>
        <OutputRoot         Condition=" '$(OutputRoot)'         == '' ">$([System.IO.Path]::Combine('$(ProjectRoot)', 'bin'))$(DirectorySeparatorChar)</OutputRoot>

        <BuildArtifactsRoot Condition=" '$(BuildArtifactsRoot)' == '' ">$([System.IO.Path]::Combine('$(ArtifactsRoot)', 'build'))$(DirectorySeparatorChar)</BuildArtifactsRoot>
        <TestArtifactsRoot  Condition=" '$(TestArtifactsRoot)'  == '' ">$([System.IO.Path]::Combine('$(ArtifactsRoot)', 'test'))$(DirectorySeparatorChar)</TestArtifactsRoot>
        <SiteArtifactsRoot  Condition=" '$(SiteArtifactsRoot)'  == '' ">$([System.IO.Path]::Combine('$(ArtifactsRoot)', 'sites'))$(DirectorySeparatorChar)</SiteArtifactsRoot>

        <ToolsRoot          Condition=" '$(ToolsRoot)'          == '' ">$(SolutionRoot)tools$(DirectorySeparatorChar)</ToolsRoot>
        <BuildRoot          Condition=" '$(BuildRoot)'          == '' ">$(ToolsRoot)build$(DirectorySeparatorChar)</BuildRoot>
        <SettingsRoot       Condition=" '$(SettingsRoot)'       == '' ">$(ToolsRoot)settings$(DirectorySeparatorChar)</SettingsRoot>
    </PropertyGroup>

    <PropertyGroup>
        <!-- define some basic reference paths for the build tools -->
        <RootPath>$([System.IO.Path]::GetFullPath('$(MSBuildThisFileDirectory)..$(DirectorySeparatorChar)'))</RootPath>
        <ToolsPath>$(RootPath)tools$(DirectorySeparatorChar)</ToolsPath>
        <BuildPath>$(ToolsPath)build$(DirectorySeparatorChar)</BuildPath>
        <PropsPath>$(ToolsPath)props$(DirectorySeparatorChar)</PropsPath>
        <TargetsPath>$(ToolsPath)targets$(DirectorySeparatorChar)</TargetsPath>
        <TasksPath>$(ToolsPath)tasks$(DirectorySeparatorChar)</TasksPath>
    </PropertyGroup>

    <Import Project="$(PropsPath)Condo.Core.props" />

    <PropertyGroup>
        <!-- force rebuild if this file changes -->
        <MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
    </PropertyGroup>
</Project>